## cnf

```config

[mysqld]
port            = 63099         #端口
max_connections = 1024          #最大连接数量

default-storage-engine=INNODB
character-set-server=utf8mb4
collation-server = utf8mb4_unicode_ci

slow_query_log = on   #开启慢查询日志
long_query_time=3   #3秒以上
#slow-query-log-file = /home/db/madb/log/slow-query.log


default-authentication-plugin=mysql_native_password


table_open_cache=2000 #表文件句柄缓存（表数据是存储在磁盘上的，缓存磁盘文件的句柄方便打开文件读取数据）
key_buffer_size=8388608 #索引缓存大小（将从磁盘上读取的索引缓存到内存，可以设置大一些，有利于快速检索）
innodb_buffer_pool_size=8388608 #Innodb存储引擎缓存池大小（对于Innodb来说最重要的一个配置，如果所有的表用的都是Innodb，那么甚至建议将该值设置到物理内存的80%，Innodb的很多性能提升如索引都是依靠这个）


# 客户端来源数据的默认字符集
[client]
default-character-set = utf8mb4

# 数据库默认字符集
[mysql]
default-character-set = utf8mb4

# binlog
server-id=1
log-bin=mysql-bin


#主从

log-slave-updates=ON
auto-increment-increment       = 10
auto-increment-offset          = 1
binlog-do-db=game_d_1,game_log_1,game_s_1,game_user,ontology,ontology_d_1,ontology_log_1,ontology_s_1
replicate-do-db=game_d_1,game_log_1,game_s_1,game_user,ontology,ontology_d_1,ontology_log_1,ontology_s_1


[master sql]
SHOW VARIABLES LIKE '%log_bin%';
SHOW MASTER STATUS;
GRANT FILE ON *.* TO 'repl_user'@'10.105.240.11' IDENTIFIED BY '8183ab0a79ed8461e15352832e91F5_#';
GRANT REPLICATION SLAVE ON *.* TO 'repl_user'@'10.105.240.11' IDENTIFIED BY '8183ab0a79ed8461e15352832e91F5_#';

/*start slave*/
STOP SLAVE;
SHOW SLAVE STATUS
CHANGE MASTER TO MASTER_HOST='10.105.240.11',MASTER_PORT=27199,MASTER_USER='repl_user',MASTER_PASSWORD='8183ab0a79ed8461e15352832e91F5_#',MASTER_LOG_FILE='mysql-bin.000021',MASTER_LOG_POS=11288354;
SLAVE START;


[slave sql]
/*start master*/
SHOW VARIABLES LIKE '%log_bin%';
SHOW MASTER STATUS;
GRANT FILE ON *.* TO 'repl_user'@'10.105.19.157' IDENTIFIED BY '8183ab0a79ed8461e15352832e91F5_#';
GRANT REPLICATION SLAVE ON *.* TO 'repl_user'@'10.105.19.157' IDENTIFIED BY '8183ab0a79ed8461e15352832e91F5_#';

/*start slave*/
STOP SLAVE;
RESET SLAVE;
SHOW SLAVE STATUS;
CHANGE MASTER TO MASTER_HOST='10.105.19.157',MASTER_PORT=27199,MASTER_USER='repl_user',MASTER_PASSWORD='8183ab0a79ed8461e15352832e91F5_#',MASTER_LOG_FILE='mysql-bin.000022',MASTER_LOG_POS=154;
START SLAVE;
```
