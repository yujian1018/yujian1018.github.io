{"root":{"data":{"id":"8fcd4577fb50","created":1472636010,"text":"game_框架"},"children":[{"data":{"id":"b7ygx9bnztsg","created":1476932633944,"text":"环境","layout":null},"children":[{"data":{"id":"bhwqro7ti0o0","created":1513318871765,"text":"使用erlang，作为服务器编程语言","expandState":"expand","layout":null},"children":[{"data":{"id":"b7ygxc70q8wg","created":1476932640193,"text":"rebar编译","layout":null},"children":[]},{"data":{"id":"b7ygxhcvfdsg","created":1476932651431,"text":"虚拟机语言，方便跨平台","layout":null},"children":[{"data":{"id":"b7ygxjrebogg","created":1476932656663,"text":"linux","layout":null},"children":[{"data":{"id":"b7ygxudk1egc","created":1476932679771,"text":"hipe","layout":null},"children":[{"data":{"id":"b7ygxyxjiowk","created":1476932689686,"text":"加速运算","layout":null},"children":[]}]}]},{"data":{"id":"b7ygxm0d9lkc","created":1476932661559,"text":"window","layout":null},"children":[]}]}]},{"data":{"id":"bhwqs6vvxeo0","created":1513318912402,"text":"mysql","layout":null},"children":[{"data":{"id":"bhwqs8xhgps0","created":1513318916852,"text":"持久化数据","layout":null},"children":[]}]},{"data":{"id":"bhwqsbneu3k0","created":1513318922773,"text":"redis","layout":null},"children":[{"data":{"id":"bhwqsdycs080","created":1513318927789,"text":"缓存全局数据","layout":null},"children":[]}]}]},{"data":{"id":"bhwqptodpts0","created":1513318726922,"text":"网关","layout":null,"expandState":"expand"},"children":[{"data":{"id":"bhwqpyx1os00","created":1513318738329,"text":"目前使用的websocket,所以使用了nginx来分发socket","layout":null},"children":[]}]},{"data":{"id":"b6s5wn2nvi0w","created":1472636035121,"text":"网络层","layout":null},"children":[{"data":{"id":"b6s5wpo1ndc8","created":1472636040768,"text":"libs/network","layout":null},"children":[{"data":{"id":"b7yh2l9dem0w","created":1476933051748,"text":"根据物理设备核心启动对应个数的accpet进程","layout":null},"children":[]},{"data":{"id":"b7yh2xxoii0o","created":1476933079339,"text":"扩展出支持多个网络协议","layout":null},"children":[{"data":{"id":"b7yh37csgk8c","created":1476933099843,"text":"tcp","layout":null},"children":[{"data":{"id":"b7yh3ai5z4g8","created":1476933106699,"text":"http","layout":null},"children":[{"data":{"id":"bhwqstz91a00","created":1513318962671,"text":"cowboy","layout":null},"children":[]}]},{"data":{"id":"b7yh3bptfzsw","created":1476933109338,"text":"websocket","layout":null},"children":[]}]},{"data":{"id":"b7yh38tpmr4s","created":1476933103043,"text":"udp","layout":null},"children":[{"data":{"id":"bhwqr5vnhvk0","created":1513318831847,"text":"未支持","layout":null},"children":[]}]}]}]}]},{"data":{"id":"b6s5wtshp544","created":1472636049744,"text":"协议层","layout":null},"children":[{"data":{"id":"b6s5x8b3314c","created":1472636081343,"text":"libs/parse_tool","layout":null},"children":[{"data":{"id":"b7yh4hgsmowk","created":1476933200218,"text":"功能：编译器前端实现，类似protobuff，自定义协议文件，生成.erl源码文件","layout":null},"children":[]},{"data":{"id":"b7yh4o76ogwg","created":1476933214874,"text":"更加灵活，只适配erlang","layout":null},"children":[]},{"data":{"id":"bhwqxwoox080","created":1513319360384,"text":"目前支持json格式、二进制格式的数据打包和解包","layout":null},"children":[]}]},{"data":{"id":"b6s5xaj5buw4","created":1472636086184,"text":"priv/proto","layout":null},"children":[{"data":{"id":"b7yh79kioiog","created":1476933418121,"text":"自定义协议配置文件","layout":null},"children":[]}]},{"data":{"text":"2.协议配置文件","layout":null},"children":[{"data":{"id":"b8dr3znpztsk","created":1478484771903,"text":"采用protobuff模式很清晰，但是无法支持由时间顺序要求的协议","layout":null},"children":[]}]},{"data":{"text":"1.使用二进制格式，最省","layout":null},"children":[{"data":{"id":"b8dr162kzgo4","created":1478484550770,"text":"注意数据打包时大小端问题","layout":null},"children":[]},{"data":{"id":"b8dr1etlnls0","created":1478484569818,"text":"注意网络层粘包的问题","layout":null},"children":[]}]},{"data":{"text":"3.协议解析源代码文件","expandState":"expand","layout":null},"children":[{"data":{"id":"b8dr5bop8rkg","created":1478484876448,"text":"元编程，根据协议配置文件生成源代码文件","layout":null},"children":[]},{"data":{"id":"b8dr5p655q80","created":1478484905801,"text":"最好能够支持生成前后端源代码文件","layout":null},"children":[]},{"data":{"id":"b8dr5ygmtzsc","created":1478484926026,"text":"能够支持生成协议测试文件，用来模拟客户端协议","layout":null},"children":[]},{"data":{"id":"b8dr6kjxuy0o","created":1478484974115,"text":"根据配置，设置debug信息","layout":null},"children":[]},{"data":{"id":"b8dr71aqk7sc","created":1478485010564,"text":"根据配置，设置协议是否入日志系统","layout":null},"children":[]},{"data":{"id":"b8dr78byibcw","created":1478485025876,"text":"根据配置，生成不同的源文件","layout":null},"children":[{"data":{"id":"b8dr7eg4kbso","created":1478485039188,"text":"apps","layout":null},"children":[]},{"data":{"id":"b8dr7hr7fows","created":1478485046389,"text":"game","layout":null},"children":[]}]}]}]},{"data":{"id":"b6s5xfksag8o","created":1472636097167,"text":"逻辑层","layout":null},"children":[{"data":{"id":"b6s5xk5d4vsw","created":1472636107119,"text":"src/mods/","layout":null},"children":[{"data":{"id":"b7yh81ccie8k","created":1476933478577,"text":"游戏逻辑的实现，玩家进程处理的内容","layout":null},"children":[]}]},{"data":{"text":"事件","expandState":"expand","layout":null},"children":[{"data":{"text":"登录","expandState":"expand","layout":null},"children":[{"data":{"text":"wga_client:setRoleDataAndEnterGame/3","layout":null},"children":[]},{"data":{"text":"初始化数据","layout":null},"children":[]},{"data":{"text":"数据分发到客户端","layout":null},"children":[]}]},{"data":{"text":"事件","expandState":"expand","layout":null},"children":[{"data":{"text":"等级提升","layout":null},"children":[]},{"data":{"text":"vip提升","layout":null},"children":[]},{"data":{"text":"凌晨刷新","layout":null},"children":[]},{"data":{"text":".....","layout":null},"children":[]}]},{"data":{"text":"消息分发","expandState":"expand","layout":null},"children":[{"data":{"text":"进程发送消息到该模块","layout":null},"children":[]}]},{"data":{"text":"保存数据","layout":null},"children":[]},{"data":{"text":"下线处理","expandState":"expand","layout":null},"children":[{"data":{"text":"wga_client:onOffline/1","layout":null},"children":[]},{"data":{"text":"数据回写mnesia","layout":null},"children":[]},{"data":{"text":"数据回写mysql","layout":null},"children":[]}]}]}]},{"data":{"id":"b7ygyvgtusoo","created":1476932760510,"text":"策划配置层","layout":null},"children":[{"data":{"id":"b7yh99559i8g","created":1476933573920,"text":"src/config/","layout":null,"expandState":"expand"},"children":[{"data":{"id":"b7yh8jvtd5sg","created":1476933518936,"text":"策划数据配置，由该系统加载入内存中","layout":null},"children":[]}]},{"data":{"text":"统一维护config配置表","layout":null},"children":[]},{"data":{"text":"暴露出配置文件。","layout":null},"children":[]}]},{"data":{"id":"b7yh7npmdyos","created":1476933448904,"text":"缓存层","layout":null},"children":[{"data":{"id":"b7yh938xd9ko","created":1476933561088,"text":"libs/cache","layout":null},"children":[{"data":{"id":"b7yh9i3ksl4w","created":1476933593416,"text":"玩家数据缓存，上线加载入内存，下线回写入db,间隔多少时间回写数据","layout":null},"children":[]}]},{"data":{"id":"b7yh967km884","created":1476933567536,"text":"src/load","layout":null},"children":[]},{"data":{"id":"b8dra5ie0pc8","created":1478485254827,"text":"世界同服的概念","layout":null},"children":[]},{"data":{"id":"b8drad440xs0","created":1478485271378,"text":"db需要能够支持缓存和持久化","layout":null},"children":[]}]},{"data":{"id":"b7ygyzakn34k","created":1476932768838,"text":"持久化层","layout":null},"children":[{"data":{"id":"b7yha1yjfv48","created":1476933636647,"text":"src/load","layout":null},"children":[{"data":{"id":"b7yha65rrkoc","created":1476933645791,"text":"mysql使用rds，不用考虑容灾以及备份","layout":null},"children":[]}]}]},{"data":{"id":"b7yh7thgybcw","created":1476933461472,"text":"日志层","layout":null},"children":[{"data":{"id":"b7yhagvkodcg","created":1476933669119,"text":"玩家数据日志","layout":null},"children":[{"data":{"id":"b7yhaluz9jk8","created":1476933679967,"text":"每一个玩家的资源产出以及消耗都做记录","layout":null},"children":[]}]}]}]},"template":"right","theme":"fresh-blue-compat","version":"1.4.43"}