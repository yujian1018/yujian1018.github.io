---
title: "2.10 预处理指令"
date: 2019-08-30T15:13:01+08:00
weight: 02100000
---

## 预处理指令

| 指令 | 说明 |
| :--- | :--- |
| # | 空指令，无任何效果 |
| #include | 包含一个源代码文件 |
| #define | 定义宏 |
| #undef | 取消已定义的宏 |
| #if | 如果给定条件为真，则编译下面代码 |
| #ifdef | 如果宏已经定义，则编译下面代码 |
| #ifndef | 如果宏没有定义，则编译下面代码 |
| #elif | 如果前面的#if给定条件不为真，当前条件为真，则编译下面代码 |
| #endif | 结束一个#if……#else条件编译块 |

    #include
    使用库函数之前，应该用#include引入对应的头文件。这种以#号开头的命令称为预处理命令。
    使用尖括号< >和双引号" "的区别在于头文件的搜索路径不同，包含标准库的头文件一般用尖括号，包含自定义的头文件一般用双引号。


    #define
    宏定义是由源程序中的宏定义命令#define完成的，宏代换是由预处理程序完成的。

    宏定义的一般形式为：
    #define  宏名  字符串
    #表示这是一条预处理命令，所有的预处理命令都以#开头。define是预处理命令。宏名是标识符的一种，命名规则和标识符相同。字符串可以是常数、表达式等。
    这里所说的字符串是一般意义上的字符序列，不要和C语言中的字符串等同，它不需要双引号。
    程序中反复使用的表达式就可以使用宏定义

    带参数宏定义
    带参宏定义的一般形式为：#define 宏名(形参列表) 字符串
    例如：
    #define M(y) y*y+3*y  //宏定义
    // Code
    k=M(5);  //宏调用


    条件编译
    第一种形式的格式为：
    #ifdef  标识符
        程序段1
    #else
        程序段2
    #endif

    它的功能是，如果标识符已被 #define 命令定义过则对程序段1进行编译；否则对程序段2进行编译。如果没有程序段2（它为空），本格式中的#else可以没有，即可以写为：

    #ifdef  标识符
        程序段
    #endif


    第二种形式的格式为：
    #ifndef 标识符
        程序段1 
    #else 
        程序段2 
    #endif
    它的功能是，如果标识符未被#define命令定义过则对程序段1进行编译，否则对程序段2进行编译。


    第三种形式的格式为：
    #if 常量表达式
        程序段1
    #else 
        程序段2
    #endif
    它的功能是，如常量表达式的值为真（非0），则对程序段1 进行编译，否则对程序段2进行编译。因此可以使程序在不同条件下，完成不同的功能。
