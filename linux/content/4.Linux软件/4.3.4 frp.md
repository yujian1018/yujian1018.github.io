---
title: "frp"
menuTitle: "frp"
weight: 0
date: 2019-08-30T15:13:01+08:00
---

# frp内网穿透

## 资料

<https://github.com/fatedier/frp>

## 配置

## 命令

```bash

# 通过 ssh 访问内网机器，假设用户名为 test：
ssh -i ~/.ssh/id_rsa -oPort=60000 yj@127.0.0.1

```

## 安全地暴露内网服务

### 服务端

```bash
#https://gofrp.org/docs/reference/server-configures/

[common]
bind_addr = 0.0.0.0
bind_port = 7000
kcp_bind_port = 7000 # 服务端监听 KCP 协议端口，用于接收采用 KCP 连接的，kcp绑定udp端口

max_pool_count = 2 # 最大连接池大小，默认5

# 权限验证
token = token123 string 鉴权使用的 token 值   客户端需要设置一样的值才能鉴权通过

```

### 客户端

```bash
# frpc.ini
[common]
server_addr = 192.168.1.100
server_port = 7000
token = token123

[tcp1]
# 本机80端口映射到外网8080端口
type = tcp              # tcp, udp, http, https, stcp, sudp, xtcp, tcpmux
local_ip = 127.0.0.1    # 本地服务 IP
local_port = 80         # 本地服务端口
remote_port = 8080      # 服务端绑定的端口


[tcp2]
# 局域网端口号映射到外网8082端口
type = tcp
local_ip = 192.168.1.85
local_port = 51005
remote_port = 8082


## 负载均衡
# frpc.ini
[test1]
type = tcp
local_port = 8080
remote_port = 80
group = web
group_key = 123

[test2]
type = tcp
local_port = 8081
remote_port = 80
group = web
group_key = 123

```
