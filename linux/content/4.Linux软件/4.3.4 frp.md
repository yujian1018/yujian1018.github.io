---
title: "frp"
menuTitle: "frp"
weight: 0
date: 2019-08-30T15:13:01+08:00
---

# frp内网穿透

## 资料

https://github.com/fatedier/frp

## 配置


## 命令

```bash

# 通过 ssh 访问内网机器，假设用户名为 test：
ssh -i ~/.ssh/id_rsa -oPort=60000 yj@127.0.0.1

```

## 安全地暴露内网服务

### 服务端

```bash
[common]
bind_port = 44099
# kcp 绑定的是 udp 端口，可以和 bind_port 一样
kcp_bind_port = 44099

max_pool_count = 2

# 身分验证
privilege_token = 1234567890

```

### 客户端1-要登陆的内网服务器

```bash
# frpc.ini
[common]
server_addr = x.x.x.x
server_port = 63095
pool_count = 8
protocol = kcp

[secret_ssh]
type = stcp
# 只有 sk 一致的用户才能访问到此服务
sk = abcdefg
local_ip = 127.0.0.1
local_port = 22
```

### 客户端2-服务器端启动-安全地暴露内网服务

```bash
# frpc.ini
[common]
server_addr = 127.0.0.1
server_port = 44099
pool_count = 2
protocol = kcp
# 身分验证
privilege_token = e4399ea4b6f256fa0e3224bd6dc098ec

[secret_ssh_visitor]
type = stcp
# stcp 的访问者
role = visitor
# 要访问的 stcp 代理的名字
server_name = secret_ssh
sk = dfa703bab2bc19d631cfde114f4807b1
bind_addr = 127.0.0.1
bind_port = 60000

```

## 连接池

```bash
# frps.ini
[common]
max_pool_count = 5

# frpc.ini
[common]
pool_count = 1
```
