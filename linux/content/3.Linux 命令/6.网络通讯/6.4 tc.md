
# tc

## 基本用法

```bash
tc qdisc show    # 显示
tc qdisc  add dev eth0 root ...... # 加入
tc qdisc  change  dev eth0 root ...... # 修改存在的 qdisc ,记的,加入同一条后只能用 change 来修改
tc qdisc del dev eth0 root  # 删除


tc qdisc add dev eth0 root netem delay 3000ms # 延时模拟3000ms
tc qdisc add dev eth0 root netem delay 3000ms 2000ms # 延时模拟3000ms+-2000ms
tc qdisc change dev eth0 root netem loss 50% # 设置丢包 50%
tc qdisc change dev eth0 root netem loss 50% 80% # 设置丢包 50%-80%之间


tc qdisc add dev eth0 root netem delay 100ms
# 该命令将 eth0 网卡的传输设置为延迟 100 毫秒发送。

tc qdisc add dev eth0 root netem delay 100ms 10ms
# 该命令将 eth0 网卡的传输设置为延迟 100ms ± 10ms (90 ~ 110 ms 之间的任意值)发送。

tc qdisc add dev eth0 root netem delay 100ms 10ms 30%
# 该命令将 eth0 网卡的传输设置为 100ms ,同时,大约有 30% 的包会延迟 ± 10ms 发送。示例:现在 ping 一下 216 机器:

tc qdisc add dev eth0 root netem loss 1%
# 该命令将 eth0 网卡的传输设置为随机丢掉 1% 的数据包。示例:在 216 上执行

tc qdisc add dev eth0 root netem loss 10%
# 显示 16 个包只有 13 个收到了。也可以设置丢包的成功率:

tc qdisc add dev eth0 root netem loss 1% 30%
# 该命令将 eth0 网卡的传输设置为随机丢掉 1% 的数据包,成功率为 30% 。


# 删除网卡上面的相关配置:将之前命令中的 add 改为 del 即可删除配置:

tc qdisc del dev eth0 XXXXXXXXXXX(自己加的配置) # 该命令将 删除 eth0 网卡的相关传输配置


# 模拟包重复
tc qdisc add dev eth0 root netem duplicate 1% # 该命令将 eth0 网卡的传输设置为随机产生 1% 的重复数据包 。

# 模拟数据包损坏:
tc qdisc add dev eth0 root netem corrupt 0.2% # 该命令将 eth0 网卡的传输设置为随机产生 0.2% 的损坏的数据包 。 (内核版本需在 2.6.16 以上)

# 模拟数据包乱序
tc qdisc change dev eth0 root netem delay 10ms reorder 25% 50% # 该命令将 eth0 网卡的传输设置为:有 25% 的数据包(50%相关)会被立即发送,其他的延迟10 秒。
tc qdisc add dev eth0 root netem delay 100ms 10ms # 新版本中,也会在一定程度上打乱发包的次序

# 查看已经配置的网络条件
tc qdisc show dev eth0 # 该命令将 查看并显示 eth0 网卡的相关传输配置

```
