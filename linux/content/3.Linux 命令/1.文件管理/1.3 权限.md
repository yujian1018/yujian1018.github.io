---
title: "1.3 权限"
date: 2019-08-30T15:13:01+08:00
---
## 权限

```bash
ls
lrwxrwxrwx  1 yujian yujian     16 12月 11 11:11 .vimrc -> git/config/vimrc
drwxr-xr-x  2 yujian yujian   4096 12月  4 15:52 .wireshark/

l rwx rwx rwx  
表示是一个链接 第一组字符(2-4)表示文件所有者的权限 第二组字符(5-7)表示文件所属用户组的权限 第三组字符(8-10)表示所有其他用户的权限  
d rwx r-x r-x  
表示是文件夹 (2-4)表示文件所有者的权限 (5-7)表示文件所属用户组的权限 (8-10)表示所有其他用户的权限  

文件权限是Linux系统的第一道安全防线，基本的权限有读取(r)、写入(w)和执行(x)：
    读取(r)：用户能够读取文件信息，查看文件内容。
    写入(w)：用户可以编辑文件，可以向文件写入内容，也可以删除文件内容。
    执行(x)：用户可以将文件作为程序来运行。

目录访问模式
目录的访问模式和文件类似，但是稍有不同：

    读取：用户可以查看目录中的文件
    写入：用户可以在当前目录中删除文件或创建文件
    执行：执行权限赋予用户遍历目录的权利，例如执行 cd 和 ls 命令。
```

## chmod

| 符号 | 说明 | 例 |
| :--- | :--- | :------ |
| + | 为文件或目录增加权限 | chmod o+wx testfile o+表示所属用户组 |
| - | 删除文件或目录的权限 | chmod u-x testfile u表示文件所有者 |
| = | 设置指定的权限 | chmod g=rx testfile g表示所有其他用户 |

```bash
chmod o+wx,u-x,g=rx testfile
```

除了符号，也可以使用八进制数字来指定具体权限，如下表所示：
| 数字 | 说明 | 权限 |
| :--- | :--- | :------ |
| 0 | 没有任何权限 | --- |
| 1 | 执行权限 | --x |
| 2 | 写入权限 | -w- |
| 3 | 执行权限和写入权限：1 (执行) + 2 (写入) = 3 | -wx |
| 4 | 读取权限 | r-- |
| 5 | 读取和执行权限：4 (读取) + 1 (执行) = 5 | r-x |
| 6 | 读取和写入权限：4 (读取) + 2 (写入) = 6 | rw- |
| 7 | 所有权限: 4 (读取) + 2 (写入) + 1 (执行) = 7 | rwx |

```bash
chmod 755 testfile 
```

chown：chown 命令是"change owner"的缩写，用来改变文件的所有者。

chgrp：chgrp 命令是"change group"的缩写，用来改变文件所在的群组。

```bash
chmod 644 -R * 
等价于：find /path -type f -exec chmod 644 {} \ ;
chmod 755 `find -type d` 
等价于：find /path -type d -exec chmod 755 {} \;


find ./ -name *.php -exec chmod 644 {} \;

ls -lh 显示权限
ls /tmp | pr -T5 -W$COLUMNS 将终端划分成5栏显示 
chmod ugo+rwx directory1 设置目录的所有人(u)、群组(g)以及其他人(o)以读（r ）、写(w)和执行(x)的权限 
chmod go-rwx directory1 删除群组(g)与其他人(o)对目录的读写执行权限 
chown user1 file1 改变一个文件的所有人属性 
chown -R user1 directory1 改变一个目录的所有人属性并同时改变改目录下所有文件的属性 
chgrp group1 file1 改变文件的群组 
chown user1:group1 file1 改变一个文件的所有人和群组属性 
find / -perm -u+s 罗列一个系统中所有使用了SUID控制的文件 
chmod u+s /bin/file1 设置一个二进制文件的 SUID 位 - 运行该文件的用户也被赋予和所有者同样的权限 
chmod u-s /bin/file1 禁用一个二进制文件的 SUID位 
chmod g+s /home/public 设置一个目录的SGID 位 - 类似SUID ，不过这是针对目录的 
chmod g-s /home/public 禁用一个目录的 SGID 位 
chmod o+t /home/public 设置一个文件的 STIKY 位 - 只允许合法所有人删除文件 
chmod o-t /home/public 禁用一个目录的 STIKY 位 


文件的特殊属性 - 使用 "+" 设置权限，使用 "-" 用于取消
chattr +a file1 只允许以追加方式读写文件
chattr +c file1 允许这个文件能被内核自动压缩/解压
chattr +d file1 在进行文件系统备份时，dump程序将忽略这个文件
chattr +i file1 设置成不可变的文件，不能被删除、修改、重命名或者链接
chattr +s file1 允许一个文件被安全地删除
chattr +S file1 一旦应用程序对这个文件执行了写操作，使系统立刻把修改的结果写到磁盘
chattr +u file1 若文件被删除，系统会允许你在以后恢复这个被删除的文件
lsattr 显示特殊的属性
```
